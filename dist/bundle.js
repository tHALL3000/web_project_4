!function(){var e={4:function(){}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,console.log(t)}var r,o;return r=n,(o=[{key:"_showErrorMessage",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideErrorMessage",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e,t){e.validity.valid?this._hideErrorMessage(e,t):this._showErrorMessage(e,t)}},{key:"_toggleButtonState",value:function(e,t){this._inputs.every((function(e){return e.validity.valid}))?(this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1):(this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0)}},{key:"_setEventListeners",value:function(){var t,n=this;this._inputs=function(t){if(Array.isArray(t))return e(t)}(t=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._button=this._form.querySelector(this._submitButtonSelector),this._inputs.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e,n._button),n._toggleButtonState(n._inputs,n._button)}))}))}},{key:"enableValidation",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._button.classList.add(e._inactiveButtonClass),e._button.disabled=!0})),this._setEventListeners()}}])&&t(r.prototype,o),n}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.querySelector(".modal__image"),document.querySelector(".modal__caption"),document.querySelector(".overlay_type_preview");var i=function(){function e(t,n){var r,o,i=this,a=t.data,c=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(){i._heart.classList.toggle("photo-grid__heart_active")},(r="_handleLikeIcon")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._cardSelector=n,this._name=a.name,this._link=a.link,this._handleCardClick=c}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photo-grid__card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this,t=this._card.querySelector(".photo-grid__heart"),n=this._card.querySelector(".photo-grid__delete"),r=this._card.querySelector(".photo-grid__picture");t.addEventListener("click",(function(){return e._handleLikeIcon()})),n.addEventListener("click",(function(){return e._handleDeleteIcon()})),r.addEventListener("click",(function(){return e._handleCardClick({link:e._link,name:e._name})}))}},{key:"_handleDeleteIcon",value:function(){this._card.remove()}},{key:"_prepareCard",value:function(){this._card.querySelector(".photo-grid__title").textContent=this._name,this._card.querySelector(".photo-grid__picture").src=this._link,this._card.alt="Image"+this._name,this._heart=this._card.querySelector(".photo-grid__heart")}},{key:"generateCard",value:function(){return this._card=this._getTemplate(),this._setEventListeners(),this._prepareCard(),this._card}}])&&o(t.prototype,n),e}(),a=n(4),c=n.n(a);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}c();var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._submitForm=e,n._popupForm=n._popupElement.querySelector(".form-profile"),n}return t=a,(n=[{key:"_getInputValues",value:function(){profileName.textContent=nameInput.value,profileTitle.textContent=titleInput.value}},{key:"setEventListeners",value:function(){s(d(a.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(e){e.preventDefault(),toggleModal(overlay)}))}},{key:"close",value:function(){this._popupForm.reset(),s(d(a.prototype),"close",this).call(this)}}])&&l(t.prototype,n),a}(c());function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._popupElement.querySelector(".modal__caption").textcontent=n;var r=this._popupElement.querySelector(".modal__image");r.src=t,r.alt="Magnificent artist interpretation of ".concat(n),v(w(a.prototype),"open",this).call(this)}}])&&m(t.prototype,n),a}(c());function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=o,this.items=r,this.cardContainer=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderSection",value:function(){var e=this;this.items.forEach((function(t){e.renderer(t)}))}},{key:"addItem",value:function(e){this.cardContainer.prepend(e)}}])&&S(t.prototype,n),e}(),E=document.querySelector("#editButton"),k=document.querySelector("#addPhoto"),C=document.querySelector(".modal_edit_profile").querySelector(".form-profile"),q=document.querySelector(".profile__name"),O=document.querySelector(".profile__job"),L=document.forms.profile.elements.name,j=document.forms.profile.elements.title,M=document.querySelector(".overlay_type_edit"),P=document.querySelector(".modal__close-button_add-photo"),B=document.querySelector(".modal__close-button_image"),D=(document.querySelector(".modal"),document.querySelector(".form_add")),H=function(e){e.classList.toggle("overlay_show"),e.classList.contains("overlay_show")?(document.addEventListener("keydown",handleEscKey),e.addEventListener("click",R)):(document.removeEventListener("keydown",handleEscKey),e.removeEventListener("click",R))},R=function(e){e.target.classList.contains("overlay")&&H(e.target)},A=document.querySelector(".overlay_type_edit"),I=document.querySelector(".overlay_type_add"),T=document.querySelector(".overlay_type_preview");E.addEventListener("click",(function(){L.value=q.textContent,j.value=O.textContent,H(A)})),k.addEventListener("click",(function(){H(I),document.getElementById("newPicture").reset()})),B.addEventListener("click",(function(){H(T)})),document.querySelector(".form-profile").addEventListener("submit",(function(e){e.preventDefault(),q.textContent=L.value,O.textContent=j.value,H(M)})),P.addEventListener("click",(function(){H(I)}));var V=document.querySelector(".form_add"),F=document.forms.newPicture.elements.nameOfPlace,N=document.forms.newPicture.elements.linkOfPlace,W=".card-template",X=function(e){var t=new i(e,W);Y.prepend(t.generateCard())};V.addEventListener("submit",(function(e){e.preventDefault();var t={name:F.value,link:N.value};X(t),H(I)}));var Y=document.querySelector(".photo-grid");[{name:"Silicon Valley",link:"https://images.unsplash.com/photo-1621646912321-c97a233701d2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=716&q=80"},{name:"Miami Beach",link:"https://images.unsplash.com/photo-1622942817454-ed616e8d3a2d?ixid=MnwxMjA3fDB8MHx2aXN1YWwtc2VhcmNofDF8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Land of Fire & Ice",link:"https://images.unsplash.com/photo-1620053553156-92e15d54f7ee?ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8eWVsbG93JTIwZmxhbWUlMjBibHVlJTIwc21va2V8ZW58MHx8MHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Neon Rain",link:"https://images.unsplash.com/photo-1621870616319-eeb7fdf31234?ixid=MnwxMjA3fDB8MHx2aXN1YWwtc2VhcmNofDF8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Fashion Capital",link:"https://images.unsplash.com/photo-1618245613901-e52b7e0123c7?ixid=MnwxMjA3fDB8MHxwcm9maWxlLXBhZ2V8MTl8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Cape Canaveral",link:"https://images.unsplash.com/photo-1530447920184-b88c8872?ixid=MnwxMjA3fDB8MHx2aXN1YWwtc2VhcmNofDF8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"}].forEach((function(e){X(e)})),new g(PopupSelector).setEventListeners(),new x({renderer:function(e){var t=new i({data:e},W);Y.prepend(t.generateCard())}}).setEventListeners(),new(c())(PopupSelector).setEventListeners(),(new y).setEventListeners();var Z={inputSelector:".modal__form-control-input",submitButtonSelector:".button",inactiveButtonClass:"button_disabled",inputErrorClass:"modal__form-control-input-error",errorClass:"popup-error"},G=new r(Z,C),J=new r(Z,D);G.enableValidation(),J.enableValidation()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWVDLGVBQzNCd0Msb0JBRUssSUFBSXJDLEVBQVEsQ0FDM0JHLFNBQVUsU0FBQzdDLEdBQ1YsSUFBTStDLEVBQ0wsSUFBSWpELEVBQ0gsQ0FDQ0UsS0FBQUEsR0FLREQsR0FFRjZFLEVBQVU1QixRQUNURCxFQUFLOEIsbUJBS0FFLG9CQUVNLElBQUl6RCxJQUFKLENBQVVpQixlQUNsQndDLHFCQUVZLElBQUl4RCxHQUNad0Qsb0JBRVYsSUFBTTdILEVBQVMsQ0FDZEksY0FBZSw2QkFDZkUscUJBQXNCLFVBQ3RCRSxvQkFBcUIsa0JBQ3JCRSxnQkFBaUIsa0NBQ2pCRSxXQUFZLGVBR1BrSCxFQUFvQixJQUFJL0gsRUFBY0MsRUFBUWlHLEdBQzlDOEIsRUFBb0IsSUFBSWhJLEVBQWNDLEVBQVF3RyxHQUVwRHNCLEVBQWtCRSxtQkFDbEJELEVBQWtCQyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZTsgfTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIi8qKiBAZm9ybWF0ICovXG5cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuXHRjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG5cdFx0dGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuXHRcdHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuXHRcdHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcblx0XHR0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuXHRcdHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblx0XHR0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG5cdFx0Y29uc29sZS5sb2coZm9ybUVsZW1lbnQpO1xuXHR9XG5cblx0X3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQpIHtcblx0XHRjb25zdCBlcnJvciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG5cdFx0ZXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcblx0XHRlcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuXHRcdGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblx0fVxuXHRfaGlkZUVycm9yTWVzc2FnZShpbnB1dCkge1xuXHRcdGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcblx0XHRlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0ZXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcblx0XHRpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cdH1cblxuXHRfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCBidXR0b24pIHtcblx0XHRpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcblx0XHRcdHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXQsIGJ1dHRvbik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQsIGJ1dHRvbik7XG5cdFx0fVxuXHR9XG5cblx0X3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0cywgYnV0dG9uKSB7XG5cdFx0Y29uc3QgaXNWYWxpZCA9IHRoaXMuX2lucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcblx0XHRpZiAoaXNWYWxpZCkge1xuXHRcdFx0dGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG5cdFx0XHR0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG5cdFx0XHR0aGlzLl9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdF9zZXRFdmVudExpc3RlbmVycygpIHtcblx0XHR0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcblx0XHR0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXHRcdHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuXHRcdFx0aW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcblx0XHRcdFx0Ly9DaGVjayBpbnB1dCB2YWxpZGl0eVxuXHRcdFx0XHR0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQsIHRoaXMuX2J1dHRvbik7XG5cdFx0XHRcdC8vdG9nZ2xlIGJ1dHRvbiBzdGF0ZVxuXHRcdFx0XHR0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dHMsIHRoaXMuX2J1dHRvbik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdGVuYWJsZVZhbGlkYXRpb24oKSB7XG5cdFx0dGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcblx0XHRcdHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0fSk7XG5cblx0XHR0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCIvKiogQGZvcm1hdCAqL1xuXG4vLyoqIEBmb3JtYXQgKi9cblxuY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBpbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG5jb25zdCBtb2RhbFByZXZpZXdXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9wcmV2aWV3XCIpO1xuXG5jb25zdCB0b2dnbGVNb2RhbCA9IChtb2RhbCkgPT4ge1xuXHRtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheV9zaG93XCIpO1xuXHRpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3ZlcmxheV9zaG93XCIpKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcblx0XHRtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3V0c2lkZUNsaWNrKTtcblx0fSBlbHNlIHtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NLZXkpO1xuXHRcdG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVPdXRzaWRlQ2xpY2spO1xuXHR9XG59O1xuXG4vLyBjb25zdCBoYW5kbGVFc2NLZXkgPSAoZSkgPT4ge1xuLy8gXHRjb25zdCBhY3RpdmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV9zaG93XCIpO1xuLy8gXHRpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIgJiYgYWN0aXZlTW9kYWwpIHtcbi8vIFx0XHR0b2dnbGVNb2RhbChhY3RpdmVNb2RhbCk7XG4vLyBcdH1cbi8vIH07XG5cbmNvbnN0IGhhbmRsZU91dHNpZGVDbGljayA9IChlKSA9PiB7XG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJvdmVybGF5XCIpKSB7XG5cdFx0dG9nZ2xlTW9kYWwoZS50YXJnZXQpO1xuXHR9XG59O1xuXG5jbGFzcyBDYXJkIHtcblx0Y29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG5cdFx0dGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuXHRcdHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG5cdFx0dGhpcy5fbGluayA9IGRhdGEubGluaztcblx0XHR0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG5cdH1cblxuXHRfZ2V0VGVtcGxhdGUoKSB7XG5cdFx0Y29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuXHRcdFx0LmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5waG90by1ncmlkX19jYXJkXCIpXG5cdFx0XHQuY2xvbmVOb2RlKHRydWUpO1xuXG5cdFx0cmV0dXJuIGNhcmRFbGVtZW50O1xuXHR9XG5cblx0X3NldEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdGNvbnN0IGNhcmRMaWtlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWdyaWRfX2hlYXJ0XCIpO1xuXHRcdGNvbnN0IGNhcmREZWxldGUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tZ3JpZF9fZGVsZXRlXCIpO1xuXHRcdGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1ncmlkX19waWN0dXJlXCIpO1xuXG5cdFx0Y2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKCkpO1xuXHRcdGNhcmREZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUljb24oKSk7XG5cdFx0Y2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuXHRcdFx0dGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcblx0XHRcdFx0bGluazogdGhpcy5fbGluayxcblx0XHRcdFx0bmFtZTogdGhpcy5fbmFtZSxcblx0XHRcdH0pXG5cdFx0KTtcblx0fVxuXG5cdC8vIF9oYW5kbGVQcmV2aWV3UGljdHVyZSgpIHtcblx0Ly8gXHRpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcblx0Ly8gXHRpbWFnZUVsZW1lbnQuYWx0ID0gXCJJbWFnZVwiICsgdGhpcy5fbmFtZSArIFwiXCI7XG5cdC8vIFx0aW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblx0Ly8gXHR0b2dnbGVNb2RhbChtb2RhbFByZXZpZXdXaW5kb3cpO1xuXHQvLyB9XG5cblx0X2hhbmRsZUxpa2VJY29uID0gKCkgPT4ge1xuXHRcdHRoaXMuX2hlYXJ0LmNsYXNzTGlzdC50b2dnbGUoXCJwaG90by1ncmlkX19oZWFydF9hY3RpdmVcIik7XG5cdH07XG5cblx0X2hhbmRsZURlbGV0ZUljb24oKSB7XG5cdFx0dGhpcy5fY2FyZC5yZW1vdmUoKTtcblx0fVxuXG5cdF9wcmVwYXJlQ2FyZCgpIHtcblx0XHR0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tZ3JpZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXHRcdHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1ncmlkX19waWN0dXJlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG5cdFx0dGhpcy5fY2FyZC5hbHQgPSBcIkltYWdlXCIgKyB0aGlzLl9uYW1lICsgXCJcIjtcblx0XHR0aGlzLl9oZWFydCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1ncmlkX19oZWFydFwiKTtcblx0fVxuXG5cdGdlbmVyYXRlQ2FyZCgpIHtcblx0XHR0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblx0XHR0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXHRcdHRoaXMuX3ByZXBhcmVDYXJkKCk7XG5cblx0XHRyZXR1cm4gdGhpcy5fY2FyZDtcblx0fVxufVxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsIi8qKiBAZm9ybWF0ICovXG5cbi8vKiogQGZvcm1hdCAqL1xuXG5Qb3B1cDtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuXHRjb25zdHJ1Y3RvcihzdWJtaXRGb3JtLCBwb3B1cFNlbGVjdG9yKSB7XG5cdFx0c3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cdFx0dGhpcy5fc3VibWl0Rm9ybSA9IHN1Ym1pdEZvcm07XG5cdFx0dGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1wcm9maWxlXCIpO1xuXHR9XG5cblx0X2dldElucHV0VmFsdWVzKCkge1xuXHRcdHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZUlucHV0LnZhbHVlO1xuXHRcdHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlSW5wdXQudmFsdWU7XG5cdFx0Ly9pbnB1dCB2YWx1ZXMgZnJvbSBmb3JtIGZpZWxkc1xuXHRcdC8vXCJuYW1lXCI6IG5ld0l0ZW1OYW1lLnZhbHVlLFxuXHRcdC8vXCJsaW5rXCI6IG5ld0l0ZW1MaW5rLnZhbHVlXG5cdH1cblxuXHRzZXRFdmVudExpc3RlbmVycygpIHtcblx0XHRzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXHRcdHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dG9nZ2xlTW9kYWwob3ZlcmxheSk7XG5cdFx0XHQvL2FkZCBjbGljayBldmVudCBsaXN0ZW5lcmNsb3NlIGljb25cblx0XHRcdC8vYWRkIHN1Ym1pdCB0byBzdWJtaXQgYnV0dG9uXG5cdFx0fSk7XG5cdH1cblxuXHRjbG9zZSgpIHtcblx0XHR0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcblx0XHRzdXBlci5jbG9zZSgpO1xuXHRcdC8vcmVzZXRcblx0fVxufVxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcbiIsIi8qKiBAZm9ybWF0ICovXG5cbi8vKiogQGZvcm1hdCAqL1xuXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG5cdGNvbnN0cnVjdG9yKFBvcHVwU2VsZWN0b3IpIHtcblx0XHRzdXBlcihQb3B1cFNlbGVjdG9yKTtcblx0fVxuXG5cdG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcblx0XHQvL2dldCBuYW1lIGFuZCBsaW5rIGZyb20gbW9kZWwgZm9ybVxuXHRcdHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpLnRleHRjb250ZW50ID0gbmFtZTtcblx0XHRjb25zdCBpbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcblx0XHRpbWFnZS5zcmMgPSBsaW5rO1xuXHRcdGltYWdlLmFsdCA9IGBNYWduaWZpY2VudCBhcnRpc3QgaW50ZXJwcmV0YXRpb24gb2YgJHtuYW1lfWA7XG5cdFx0Ly9jYWxsIG9wZW4gZnVuY3Rpb24gZnJvbSBwYXJlbnQgY2xhc3Mgd2l0aCBzdXBlclxuXHRcdHN1cGVyLm9wZW4oKTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiIsIi8qKiBAZm9ybWF0ICovXG5cbi8vKiogQGZvcm1hdCAqL1xuXG5jbGFzcyBTZWN0aW9uIHtcblx0Y29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZENvbnRhaW5lcikge1xuXHRcdHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcblx0XHR0aGlzLml0ZW1zID0gaXRlbXM7XG5cdFx0dGhpcy5jYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkQ29udGFpbmVyKTtcblx0fVxuXG5cdHJlbmRlclNlY3Rpb24oKSB7XG5cdFx0Ly9yZW5kZXIgZWFjaCBlbGVtZW50IG9uIHBhZ2Vcblx0XHR0aGlzLml0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcblx0XHRcdHRoaXMucmVuZGVyZXIoaXRlbSk7XG5cdFx0fSk7XG5cdH1cblxuXHRhZGRJdGVtKGNhcmQpIHtcblx0XHQvL3Rha2VzIERPTSBlbGVtZW50IGFuZCBhZGRzIGl0IHRvIHRoZSBjb250YWluZXJcblx0XHR0aGlzLmNhcmRDb250YWluZXIucHJlcGVuZChjYXJkKTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiLyoqIEBmb3JtYXQgKi9cblxuLy8qKiBAZm9ybWF0ICovXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vdXRpbHMvRm9ybVZhbGlkYXRvclwiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG4vL2ltcG9ydCBcIi4uL2ltYWdlcy9hdmF0YXIuanBnXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vdXRpbHMvU2VjdGlvbi5qc1wiO1xuXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0QnV0dG9uXCIpO1xuY29uc3QgcGhvdG9Nb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkUGhvdG9cIik7XG5jb25zdCBtb2RhbFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2VkaXRfcHJvZmlsZVwiKTtcbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IG1vZGFsUHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tcHJvZmlsZVwiKTtcblxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2pvYlwiKTtcblxuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZS5lbGVtZW50cy5uYW1lO1xuY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmZvcm1zLnByb2ZpbGUuZWxlbWVudHMudGl0bGU7XG5cbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9lZGl0XCIpO1xuXG4vLyBjb25zdCBwcm9maWxlQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25cIik7XG5jb25zdCBhZGRQaG90b0Nsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uX2FkZC1waG90b1wiKTtcbmNvbnN0IGltZ1ByZXZpZXdDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvbl9pbWFnZVwiKTtcblxuY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xuY29uc3QgY2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX2FkZFwiKTtcblxuY29uc3QgdG9nZ2xlTW9kYWwgPSAobW9kYWwpID0+IHtcblx0bW9kYWwuY2xhc3NMaXN0LnRvZ2dsZShcIm92ZXJsYXlfc2hvd1wiKTtcblx0aWYgKFxuXHRcdG1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhcblx0XHRcdFwib3ZlcmxheV9zaG93XCJcblx0XHQpXG5cdCkge1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG5cdFx0XHRcImtleWRvd25cIixcblx0XHRcdGhhbmRsZUVzY0tleVxuXHRcdCk7XG5cdFx0bW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdFwiY2xpY2tcIixcblx0XHRcdGhhbmRsZU91dHNpZGVDbGlja1xuXHRcdCk7XG5cdH0gZWxzZSB7XG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcblx0XHRcdFwia2V5ZG93blwiLFxuXHRcdFx0aGFuZGxlRXNjS2V5XG5cdFx0KTtcblx0XHRtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFxuXHRcdFx0XCJjbGlja1wiLFxuXHRcdFx0aGFuZGxlT3V0c2lkZUNsaWNrXG5cdFx0KTtcblx0fVxufTtcblxuY29uc3QgaGFuZGxlT3V0c2lkZUNsaWNrID0gKGUpID0+IHtcblx0aWYgKFxuXHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcblx0XHRcdFwib3ZlcmxheVwiXG5cdFx0KVxuXHQpIHtcblx0XHR0b2dnbGVNb2RhbChcblx0XHRcdGUudGFyZ2V0XG5cdFx0KTtcblx0fVxufTtcbi8vY29uc3QgaGFuZGxlRXNjS2V5ID0gKGUpID0+IHtcbi8vIFx0Y29uc3QgYWN0aXZlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfc2hvd1wiKTtcbi8vIFx0aWYgKGUua2V5ID09PSBcIkVzY2FwZVwiICYmIGFjdGl2ZU1vZGFsKSB7XG4vLyBcdFx0dG9nZ2xlTW9kYWwoYWN0aXZlTW9kYWwpO1xuLy8gXHR9XG4vLyB9O1xuXG5jb25zdCBtb2RhbEVkaXRXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9lZGl0XCIpO1xuY29uc3QgbW9kYWxBZGRXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9hZGRcIik7XG5jb25zdCBtb2RhbFByZXZpZXdXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9wcmV2aWV3XCIpO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdG5hbWVJbnB1dC52YWx1ZSA9XG5cdFx0cHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG5cdHRpdGxlSW5wdXQudmFsdWUgPVxuXHRcdHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcblx0dG9nZ2xlTW9kYWwobW9kYWxFZGl0V2luZG93KTtcbn0pO1xuXG5waG90b01vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdHRvZ2dsZU1vZGFsKG1vZGFsQWRkV2luZG93KTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG5cdFx0XCJuZXdQaWN0dXJlXCJcblx0KS5yZXNldCgpO1xufSk7XG5cbi8vIHByb2ZpbGVDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gXHR0b2dnbGVNb2RhbChtb2RhbEVkaXRXaW5kb3cpO1xuLy8gfSk7XG5cbmltZ1ByZXZpZXdDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHR0b2dnbGVNb2RhbChtb2RhbFByZXZpZXdXaW5kb3cpO1xufSk7XG5cbmNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLXByb2ZpbGVcIik7XG5mb3JtUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0cHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPVxuXHRcdG5hbWVJbnB1dC52YWx1ZTtcblx0cHJvZmlsZVRpdGxlLnRleHRDb250ZW50ID1cblx0XHR0aXRsZUlucHV0LnZhbHVlO1xuXHR0b2dnbGVNb2RhbChvdmVybGF5KTtcbn0pO1xuXG5hZGRQaG90b0Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdHRvZ2dsZU1vZGFsKG1vZGFsQWRkV2luZG93KTtcbn0pO1xuXG5jb25zdCBhZGRQaWN0dXJlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9hZGRcIik7XG5jb25zdCBwaWN0dXJlVGl0bGVJbnB1dCA9IGRvY3VtZW50LmZvcm1zLm5ld1BpY3R1cmUuZWxlbWVudHMubmFtZU9mUGxhY2U7XG5jb25zdCBwaWN0dXJlTGlua0lucHV0ID0gZG9jdW1lbnQuZm9ybXMubmV3UGljdHVyZS5lbGVtZW50cy5saW5rT2ZQbGFjZTtcbmNvbnN0IGNhcmRTZWxlY3RvciA9IFwiLmNhcmQtdGVtcGxhdGVcIjtcblxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XG5cdGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcblx0XHRkYXRhLFxuXHRcdGNhcmRTZWxlY3RvclxuXHQpO1xuXHRwaG90b0dyaWQucHJlcGVuZChjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbn07XG5cbmFkZFBpY3R1cmVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRjb25zdCB1c2VyQ2FyZCA9IHtcblx0XHRuYW1lOiBwaWN0dXJlVGl0bGVJbnB1dC52YWx1ZSxcblx0XHRsaW5rOiBwaWN0dXJlTGlua0lucHV0LnZhbHVlLFxuXHR9O1xuXG5cdHJlbmRlckNhcmQodXNlckNhcmQpO1xuXHR0b2dnbGVNb2RhbChtb2RhbEFkZFdpbmRvdyk7XG59KTtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuXHR7XG5cdFx0bmFtZTogXCJTaWxpY29uIFZhbGxleVwiLFxuXHRcdGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MjE2NDY5MTIzMjEtYzk3YTIzMzcwMWQyP2l4aWQ9TW53eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDgmaXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MTYmcT04MFwiLFxuXHR9LFxuXHR7XG5cdFx0bmFtZTogXCJNaWFtaSBCZWFjaFwiLFxuXHRcdGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MjI5NDI4MTc0NTQtZWQ2MTZlOGQzYTJkP2l4aWQ9TW53eE1qQTNmREI4TUh4MmFYTjFZV3d0YzJWaGNtTm9mREY4Zkh4bGJud3dmSHg4ZkElM0QlM0QmaXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04MDAmcT02MFwiLFxuXHR9LFxuXHR7XG5cdFx0bmFtZTogXCJMYW5kIG9mIEZpcmUgJiBJY2VcIixcblx0XHRsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjIwMDUzNTUzMTU2LTkyZTE1ZDU0ZjdlZT9peGlkPU1ud3hNakEzZkRCOE1IeHpaV0Z5WTJoOE9YeDhlV1ZzYkc5M0pUSXdabXhoYldVbE1qQmliSFZsSlRJd2MyMXZhMlY4Wlc1OE1IeDhNSHg4Jml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODAwJnE9NjBcIixcblx0fSxcblx0e1xuXHRcdG5hbWU6IFwiTmVvbiBSYWluXCIsXG5cdFx0bGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYyMTg3MDYxNjMxOS1lZWI3ZmRmMzEyMzQ/aXhpZD1Nbnd4TWpBM2ZEQjhNSHgyYVhOMVlXd3RjMlZoY21Ob2ZERjhmSHhsYm53d2ZIeDhmQSUzRCUzRCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTgwMCZxPTYwXCIsXG5cdH0sXG5cdHtcblx0XHRuYW1lOiBcIkZhc2hpb24gQ2FwaXRhbFwiLFxuXHRcdGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTgyNDU2MTM5MDEtZTUyYjdlMDEyM2M3P2l4aWQ9TW53eE1qQTNmREI4TUh4d2NtOW1hV3hsTFhCaFoyVjhNVGw4Zkh4bGJud3dmSHg4ZkElM0QlM0QmaXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04MDAmcT02MFwiLFxuXHR9LFxuXHR7XG5cdFx0bmFtZTogXCJDYXBlIENhbmF2ZXJhbFwiLFxuXHRcdGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzA0NDc5MjAxODQtYjg4Yzg4NzI/aXhpZD1Nbnd4TWpBM2ZEQjhNSHgyYVhOMVlXd3RjMlZoY21Ob2ZERjhmSHhsYm53d2ZIeDhmQSUzRCUzRCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTgwMCZxPTYwXCIsXG5cdH0sXG5dO1xuXG5jb25zdCBwaG90b0dyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWdyaWRcIik7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XG5cdHJlbmRlckNhcmQoY2FyZCk7XG59KTtcblxuLy8gY29uc3QgdXNlckluZm8gPSBuZXcgdXNlckluZm8oe1xuLy8gXHR1c2VybmFtZVNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLnByb2ZpbGVUaXRsZSxcbi8vIFx0dXNlckRlc2NyaXB0aW9uU2VsZWN0b3I6IHByb2ZpbGVDb25maWcucHJvZmlsZURlc2NyaXB0aW9uXG4vLyB9KVxuXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFBvcHVwU2VsZWN0b3IpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuXHRyZW5kZXJlcjogKGRhdGEpID0+IHtcblx0XHRjb25zdCBjYXJkID1cblx0XHRcdG5ldyBDYXJkKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZGF0YSxcblx0XHRcdFx0XHQvLyBoYW5kbGVDYXJkQ2xpY2s6IChkYXRhKSA9PiB7XG5cdFx0XHRcdFx0Ly8gXHRpbWFnZVBvcHVwLm9wZW4oZGF0YSlcblx0XHRcdFx0XHQvLyB9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNhcmRTZWxlY3RvclxuXHRcdFx0KTtcblx0XHRwaG90b0dyaWQucHJlcGVuZChcblx0XHRcdGNhcmQuZ2VuZXJhdGVDYXJkKClcblx0XHQpO1xuXHRcdChcIi5jYXJkLXRlbXBsYXRlXCIpO1xuXHR9LFxufSk7XG5zZWN0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwID0gbmV3IFBvcHVwKFBvcHVwU2VsZWN0b3IpO1xucG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oKTtcbnBvcHVwRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBjb25maWcgPSB7XG5cdGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtLWNvbnRyb2wtaW5wdXRcIixcblx0c3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmJ1dHRvblwiLFxuXHRpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImJ1dHRvbl9kaXNhYmxlZFwiLFxuXHRpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0tY29udHJvbC1pbnB1dC1lcnJvclwiLFxuXHRlcnJvckNsYXNzOiBcInBvcHVwLWVycm9yXCIsXG59O1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZWRpdEZvcm1FbGVtZW50KTtcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjYXJkRm9ybUVsZW1lbnQpO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiY29uc29sZSIsImxvZyIsImlucHV0IiwiZXJyb3IiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiYnV0dG9uIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3JNZXNzYWdlIiwiX3Nob3dFcnJvck1lc3NhZ2UiLCJpbnB1dHMiLCJfaW5wdXRzIiwiZXZlcnkiLCJfYnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZG9jdW1lbnQiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsIl9oZWFydCIsInRvZ2dsZSIsIl9jYXJkU2VsZWN0b3IiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaGFuZGxlQ2FyZENsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRMaWtlIiwiX2NhcmQiLCJjYXJkRGVsZXRlIiwiY2FyZEltYWdlIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUljb24iLCJzcmMiLCJhbHQiLCJfZ2V0VGVtcGxhdGUiLCJfcHJlcGFyZUNhcmQiLCJQb3B1cCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtIiwicG9wdXBTZWxlY3RvciIsIl9zdWJtaXRGb3JtIiwiX3BvcHVwRm9ybSIsIl9wb3B1cEVsZW1lbnQiLCJwcm9maWxlTmFtZSIsIm5hbWVJbnB1dCIsInZhbHVlIiwicHJvZmlsZVRpdGxlIiwidGl0bGVJbnB1dCIsIl9wb3B1cFNlbGVjdG9yIiwidG9nZ2xlTW9kYWwiLCJvdmVybGF5IiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIlBvcHVwU2VsZWN0b3IiLCJ0ZXh0Y29udGVudCIsImltYWdlIiwiU2VjdGlvbiIsImNhcmRDb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiaXRlbSIsImNhcmQiLCJwcmVwZW5kIiwiZWRpdEJ1dHRvbiIsInBob3RvTW9kYWxCdXR0b24iLCJlZGl0Rm9ybUVsZW1lbnQiLCJmb3JtcyIsInByb2ZpbGUiLCJlbGVtZW50cyIsInRpdGxlIiwiYWRkUGhvdG9DbG9zZSIsImltZ1ByZXZpZXdDbG9zZSIsImNhcmRGb3JtRWxlbWVudCIsIm1vZGFsIiwiY29udGFpbnMiLCJoYW5kbGVFc2NLZXkiLCJoYW5kbGVPdXRzaWRlQ2xpY2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwibW9kYWxFZGl0V2luZG93IiwibW9kYWxBZGRXaW5kb3ciLCJtb2RhbFByZXZpZXdXaW5kb3ciLCJnZXRFbGVtZW50QnlJZCIsImFkZFBpY3R1cmVGb3JtIiwicGljdHVyZVRpdGxlSW5wdXQiLCJuZXdQaWN0dXJlIiwibmFtZU9mUGxhY2UiLCJwaWN0dXJlTGlua0lucHV0IiwibGlua09mUGxhY2UiLCJyZW5kZXJDYXJkIiwicGhvdG9HcmlkIiwiZ2VuZXJhdGVDYXJkIiwidXNlckNhcmQiLCJzZXRFdmVudExpc3RlbmVycyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==