!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,console.log(t)}var r,o;return r=n,(o=[{key:"_showErrorMessage",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideErrorMessage",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e,t){e.validity.valid?this._hideErrorMessage(e,t):this._showErrorMessage(e,t)}},{key:"_toggleButtonState",value:function(e,t){this._inputs.every((function(e){return e.validity.valid}))?(this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1):(this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0)}},{key:"_setEventListeners",value:function(){var t,n=this;this._inputs=function(t){if(Array.isArray(t))return e(t)}(t=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._button=this._form.querySelector(this._submitButtonSelector),this._inputs.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e,n._button),n._toggleButtonState(n._inputs,n._button)}))}))}},{key:"enableValidation",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._button.classList.add(e._inactiveButtonClass),e._button.disabled=!0})),this._setEventListeners()}}])&&t(r.prototype,o),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}document.querySelector(".modal__image"),document.querySelector(".modal__caption"),document.querySelector(".overlay_type_preview");var o=function(){function e(t,n){var r,o,i=this,a=t.data,c=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(){i._heart.classList.toggle("photo-grid__heart_active")},(r="_handleLikeIcon")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._text=a.name,this._link=a.link,this._cardSelector=n,this._handleCardClick=c,console.log(c)}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photo-grid__card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this,t=this._card.querySelector(".photo-grid__heart"),n=this._card.querySelector(".photo-grid__delete"),r=this._card.querySelector(".photo-grid__picture");t.addEventListener("click",(function(){return e._handleLikeIcon()})),n.addEventListener("click",(function(){return e._handleDeleteIcon()})),r.addEventListener("click",(function(){return e._handleCardClick({link:e._link,name:e._name})}))}},{key:"_handleDeleteIcon",value:function(){this._card.remove()}},{key:"_prepareCard",value:function(){this._card.querySelector(".photo-grid__title").textContent=this._name,this._card.querySelector(".photo-grid__picture").src=this._link,this._card.alt="Image"+this._name,this._heart=this._card.querySelector(".photo-grid__heart")}},{key:"generateCard",value:function(){return this._card=this._getTemplate(),this._setEventListeners(),this._prepareCard(),this._card}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_handleEscKey",(function(e){e.preventDefault(),"Escape"===e.key&&n.close()})),a(this,"_handleOutsideClick",(function(e){n.close()})),this._popupElement=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){var e=this;this._popupElement.classList.add("overlay_show"),this._popupElement.classList.contains("overlay_show")&&(document.addEventListener("keydown",(function(){e._handleEscKey()})),this._popupElement.addEventListener("click",(function(){e._handleOutsideClick()})))}},{key:"close",value:function(){this._popupElement.classList.remove("overlay_show"),document.removeEventListener("keydown",this._handleEscKey),modal.removeEventListener("click",this._handleOutsideClick)}},{key:"setEventListeners",value:function(){var e=this,t=document.querySelector(".modal__close-button");this._popupElement.classList.addEventListener("click",(function(n){(n.target.classList.contains("overlay_show")||n.target.classList.contains(t))&&e.close()}))}}])&&i(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._submitForm=e,n._popupForm=n._popupElement.querySelector(".form-profile"),n}return t=a,(n=[{key:"_getInputValues",value:function(){profileName.textContent=nameInput.value,profileTitle.textContent=titleInput.value}},{key:"setEventListeners",value:function(){s(d(a.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(e){e.preventDefault(),toggleModal(overlay)}))}},{key:"close",value:function(){this._popupForm.reset(),s(d(a.prototype),"close",this).call(this)}}])&&u(t.prototype,n),a}(c);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._popupElement.querySelector(".modal__caption").textcontent=n;var r=this._popupElement.querySelector(".modal__image");r.src=t,r.alt="Magnificent artist interpretation of ".concat(n),v(w(a.prototype),"open",this).call(this)}}])&&m(t.prototype,n),a}(c);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=o,this.items=r,this.cardContainer=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderSection",value:function(){var e=this;this.items.forEach((function(t){e.renderer(t)}))}},{key:"addItem",value:function(e){this.cardContainer.prepend(e)}}])&&S(t.prototype,n),e}(),E=document.querySelector("#editButton"),C=document.querySelector("#addPhoto"),x=document.querySelector(".modal_edit_profile").querySelector(".form-profile"),L=document.querySelector(".profile__name"),q=document.querySelector(".profile__job"),O=document.forms.profile.elements.name,j=document.forms.profile.elements.title,M=document.querySelector(".overlay_type_edit"),P=document.querySelector(".modal__close-button_add-photo"),D=document.querySelector(".modal__close-button_image"),B=(document.querySelector(".modal"),document.querySelector(".form_add")),H=function(e){e.classList.toggle("overlay_show"),e.classList.contains("overlay_show")?(document.addEventListener("keydown",handleEscKey),e.addEventListener("click",R)):(document.removeEventListener("keydown",handleEscKey),e.removeEventListener("click",R))},R=function(e){e.target.classList.contains("overlay")&&H(e.target)},A=document.querySelector(".overlay_type_edit"),I=document.querySelector(".overlay_type_add"),T=document.querySelector(".overlay_type_preview");E.addEventListener("click",(function(){O.value=L.textContent,j.value=q.textContent,H(A)})),C.addEventListener("click",(function(){H(I),document.getElementById("newPicture").reset()})),D.addEventListener("click",(function(){H(T)})),document.querySelector(".form-profile").addEventListener("submit",(function(e){e.preventDefault(),L.textContent=O.value,q.textContent=j.value,H(M)})),P.addEventListener("click",(function(){H(I)}));var V=document.querySelector(".form_add"),F=document.forms.newPicture.elements.nameOfPlace,N=document.forms.newPicture.elements.linkOfPlace,W=".card-template";V.addEventListener("submit",(function(e){e.preventDefault();var t={name:F.value,link:N.value};X(t),H(I)}));var K=document.querySelector(".photo-grid"),X=(new k({renderer:function(e){console.log("renderer",e);var t=new o({data:e,handleCardClick:function(e){Y.open({name:e.name,link:e.link})}},W);K.prepend(t.generateCard())}}),function(e){var t=new o({data:e,handleCardClick:handleCardClick},W);K.prepend(t.generateCard())});[{name:"Silicon Valley",link:"https://images.unsplash.com/photo-1621646912321-c97a233701d2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=716&q=80"},{name:"Miami Beach",link:"https://images.unsplash.com/photo-1622942817454-ed616e8d3a2d?ixid=MnwxMjA3fDB8MHx2aXN1YWwtc2VhcmNofDF8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Land of Fire & Ice",link:"https://images.unsplash.com/photo-1620053553156-92e15d54f7ee?ixid=MnwxMjA3fDB8MHxzZWFyY2h8OXx8eWVsbG93JTIwZmxhbWUlMjBibHVlJTIwc21va2V8ZW58MHx8MHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Neon Rain",link:"https://images.unsplash.com/photo-1621870616319-eeb7fdf31234?ixid=MnwxMjA3fDB8MHx2aXN1YWwtc2VhcmNofDF8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Fashion Capital",link:"https://images.unsplash.com/photo-1618245613901-e52b7e0123c7?ixid=MnwxMjA3fDB8MHxwcm9maWxlLXBhZ2V8MTl8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"},{name:"Cape Canaveral",link:"https://images.unsplash.com/photo-1530447920184-b88c8872?ixid=MnwxMjA3fDB8MHx2aXN1YWwtc2VhcmNofDF8fHxlbnwwfHx8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60"}].forEach((function(e){X(e)})),new c(PopupSelector).setEventListeners(),new h(submitForm,PopupSelector).setEventListeners();var Y=new g(PopupSelector);Y.setEventListeners();var Z={inputSelector:".modal__form-control-input",submitButtonSelector:".button",inactiveButtonClass:"button_disabled",inputErrorClass:"modal__form-control-input-error",errorClass:"popup-error"},G=new n(Z,x),J=new n(Z,B);G.enableValidation(),J.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU15RCxFQUFPLElBQUkzRCxFQUFLLENBQUVFLEtBQUFBLEVBQU1DLGdCQUFBQSxpQkFBbUJGLEdBQ2pEb0YsRUFBVXpCLFFBQVFELEVBQUs2QixrQkExREgsQ0FDcEIsQ0FDQ2pGLEtBQU0saUJBQ05FLEtBQU0saUtBRVAsQ0FDQ0YsS0FBTSxjQUNORSxLQUFNLDZLQUVQLENBQ0NGLEtBQU0scUJBQ05FLEtBQU0scU1BRVAsQ0FDQ0YsS0FBTSxZQUNORSxLQUFNLDZLQUVQLENBQ0NGLEtBQU0sa0JBQ05FLEtBQU0sNktBRVAsQ0FDQ0YsS0FBTSxpQkFDTkUsS0FBTSwwS0FzQ0tqQixTQUFRLFNBQUNtRSxHQUNyQnlCLEVBQVd6QixNQUdFLElBQUlsQyxFQUFNYyxlQUNsQmtELG9CQUVZLElBQUlwRCxFQUFjQyxXQUFZQyxlQUN0Q2tELG9CQUVWLElBQU1ILEVBQWEsSUFBSW5DLEVBQWVaLGVBQ3RDK0MsRUFBV0csb0JBSVgsSUFBTXJJLEVBQVMsQ0FDZEksY0FBZSw2QkFDZkUscUJBQXNCLFVBQ3RCRSxvQkFBcUIsa0JBQ3JCRSxnQkFBaUIsa0NBQ2pCRSxXQUFZLGVBR1AwSCxFQUFvQixJQUFJdkksRUFBY0MsRUFBUTJHLEdBQzlDNEIsRUFBb0IsSUFBSXhJLEVBQWNDLEVBQVFrSCxHQUVwRG9CLEVBQWtCRSxtQkFDbEJELEVBQWtCQyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBAZm9ybWF0ICovXG5cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuXHRjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG5cdFx0dGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuXHRcdHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuXHRcdHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcblx0XHR0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuXHRcdHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblx0XHR0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG5cdFx0Y29uc29sZS5sb2coZm9ybUVsZW1lbnQpO1xuXHR9XG5cblx0X3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQpIHtcblx0XHRjb25zdCBlcnJvciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG5cdFx0ZXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcblx0XHRlcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuXHRcdGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblx0fVxuXHRfaGlkZUVycm9yTWVzc2FnZShpbnB1dCkge1xuXHRcdGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcblx0XHRlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0ZXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcblx0XHRpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG5cdH1cblxuXHRfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0LCBidXR0b24pIHtcblx0XHRpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcblx0XHRcdHRoaXMuX2hpZGVFcnJvck1lc3NhZ2UoaW5wdXQsIGJ1dHRvbik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQsIGJ1dHRvbik7XG5cdFx0fVxuXHR9XG5cblx0X3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0cywgYnV0dG9uKSB7XG5cdFx0Y29uc3QgaXNWYWxpZCA9IHRoaXMuX2lucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcblx0XHRpZiAoaXNWYWxpZCkge1xuXHRcdFx0dGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG5cdFx0XHR0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG5cdFx0XHR0aGlzLl9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdF9zZXRFdmVudExpc3RlbmVycygpIHtcblx0XHR0aGlzLl9pbnB1dHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcblx0XHR0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXHRcdHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuXHRcdFx0aW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcblx0XHRcdFx0Ly9DaGVjayBpbnB1dCB2YWxpZGl0eVxuXHRcdFx0XHR0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQsIHRoaXMuX2J1dHRvbik7XG5cdFx0XHRcdC8vdG9nZ2xlIGJ1dHRvbiBzdGF0ZVxuXHRcdFx0XHR0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9pbnB1dHMsIHRoaXMuX2J1dHRvbik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdGVuYWJsZVZhbGlkYXRpb24oKSB7XG5cdFx0dGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcblx0XHRcdHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0fSk7XG5cblx0XHR0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCIvKiogQGZvcm1hdCAqL1xuXG4vLyoqIEBmb3JtYXQgKi9cblxuY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBpbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG5jb25zdCBtb2RhbFByZXZpZXdXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9wcmV2aWV3XCIpO1xuXG5jb25zdCB0b2dnbGVNb2RhbCA9IChtb2RhbCkgPT4ge1xuXHRtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheV9zaG93XCIpO1xuXHRpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3ZlcmxheV9zaG93XCIpKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcblx0XHRtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3V0c2lkZUNsaWNrKTtcblx0fSBlbHNlIHtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NLZXkpO1xuXHRcdG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVPdXRzaWRlQ2xpY2spO1xuXHR9XG59O1xuXG4vLyBjb25zdCBoYW5kbGVFc2NLZXkgPSAoZSkgPT4ge1xuLy8gXHRjb25zdCBhY3RpdmVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV9zaG93XCIpO1xuLy8gXHRpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIgJiYgYWN0aXZlTW9kYWwpIHtcbi8vIFx0XHR0b2dnbGVNb2RhbChhY3RpdmVNb2RhbCk7XG4vLyBcdH1cbi8vIH07XG5cbmNvbnN0IGhhbmRsZU91dHNpZGVDbGljayA9IChlKSA9PiB7XG5cdGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJvdmVybGF5XCIpKSB7XG5cdFx0dG9nZ2xlTW9kYWwoZS50YXJnZXQpO1xuXHR9XG59O1xuXG5jbGFzcyBDYXJkIHtcblx0Y29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG5cdFx0dGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcblx0XHR0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuXHRcdHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3Rvcjtcblx0XHR0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG5cdFx0Y29uc29sZS5sb2coaGFuZGxlQ2FyZENsaWNrKTtcblx0fVxuXG5cdF9nZXRUZW1wbGF0ZSgpIHtcblx0XHRjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tZ3JpZF9fY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG5cblx0XHRyZXR1cm4gY2FyZEVsZW1lbnQ7XG5cdH1cblxuXHRfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cdFx0Y29uc3QgY2FyZExpa2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tZ3JpZF9faGVhcnRcIik7XG5cdFx0Y29uc3QgY2FyZERlbGV0ZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1ncmlkX19kZWxldGVcIik7XG5cdFx0Y29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWdyaWRfX3BpY3R1cmVcIik7XG5cblx0XHRjYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XG5cdFx0Y2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlSWNvbigpKTtcblx0XHRjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG5cdFx0XHR0aGlzLl9oYW5kbGVDYXJkQ2xpY2soe1xuXHRcdFx0XHRsaW5rOiB0aGlzLl9saW5rLFxuXHRcdFx0XHRuYW1lOiB0aGlzLl9uYW1lLFxuXHRcdFx0fSlcblx0XHQpO1xuXHR9XG5cblx0Ly8gX2hhbmRsZVByZXZpZXdQaWN0dXJlKCkge1xuXHQvLyBcdGltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuXHQvLyBcdGltYWdlRWxlbWVudC5hbHQgPSBcIkltYWdlXCIgKyB0aGlzLl9uYW1lICsgXCJcIjtcblx0Ly8gXHRpbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXHQvLyBcdHRvZ2dsZU1vZGFsKG1vZGFsUHJldmlld1dpbmRvdyk7XG5cdC8vIH1cblxuXHRfaGFuZGxlTGlrZUljb24gPSAoKSA9PiB7XG5cdFx0dGhpcy5faGVhcnQuY2xhc3NMaXN0LnRvZ2dsZShcInBob3RvLWdyaWRfX2hlYXJ0X2FjdGl2ZVwiKTtcblx0fTtcblxuXHRfaGFuZGxlRGVsZXRlSWNvbigpIHtcblx0XHR0aGlzLl9jYXJkLnJlbW92ZSgpO1xuXHR9XG5cblx0X3ByZXBhcmVDYXJkKCkge1xuXHRcdHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90by1ncmlkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cdFx0dGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWdyaWRfX3BpY3R1cmVcIikuc3JjID0gdGhpcy5fbGluaztcblx0XHR0aGlzLl9jYXJkLmFsdCA9IFwiSW1hZ2VcIiArIHRoaXMuX25hbWUgKyBcIlwiO1xuXHRcdHRoaXMuX2hlYXJ0ID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvLWdyaWRfX2hlYXJ0XCIpO1xuXHR9XG5cblx0Z2VuZXJhdGVDYXJkKCkge1xuXHRcdHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0dGhpcy5fcHJlcGFyZUNhcmQoKTtcblxuXHRcdHJldHVybiB0aGlzLl9jYXJkO1xuXHR9XG59XG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiLyoqIEBmb3JtYXQgKi9cblxuLy8qKiBAZm9ybWF0ICovXG5cbmNsYXNzIFBvcHVwIHtcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuXHRcdHRoaXMuX3BvcHVwRWxlbWVudCA9XG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0XHRwb3B1cFNlbGVjdG9yXG5cdFx0XHQpO1xuXHR9XG5cdF9oYW5kbGVFc2NLZXkgPSAoZSkgPT4ge1xuXHRcdC8vIGNvbnN0IGFjdGl2ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5X3Nob3dcIik7XG5cdFx0Ly8gaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiICYmIGFjdGl2ZU1vZGFsKSB7XG5cdFx0Ly8gICAgIHRvZ2dsZU1vZGFsKGFjdGl2ZU1vZGFsKTsgLy9jbG9zZSBmdW5jdGlvblxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRpZiAoXG5cdFx0XHRlLmtleSA9PT1cblx0XHRcdFwiRXNjYXBlXCJcblx0XHQpXG5cdFx0XHR0aGlzLmNsb3NlKCk7XG5cdH07XG5cblx0X2hhbmRsZU91dHNpZGVDbGljayA9IChlKSA9PiB7XG5cdFx0Ly8gaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm92ZXJsYXlcIikpXG5cdFx0Ly8gICAgIHRvZ2dsZU1vZGFsKGUudGFyZ2V0KTsgLy9jbG9zZSBmdW5jdGlvblxuXHRcdHRoaXMuY2xvc2UoKTtcblx0fTtcblx0b3BlbigpIHtcblx0XHR0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcblx0XHRcdFwib3ZlcmxheV9zaG93XCJcblx0XHQpO1xuXHRcdGlmIChcblx0XHRcdHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXG5cdFx0XHRcdFwib3ZlcmxheV9zaG93XCJcblx0XHRcdClcblx0XHQpIHtcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG5cdFx0XHRcdFwia2V5ZG93blwiLFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5faGFuZGxlRXNjS2V5KCk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0XHR0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdFx0XCJjbGlja1wiLFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5faGFuZGxlT3V0c2lkZUNsaWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cdFx0fVxuXHR9XG5cblx0Y2xvc2UoKSB7XG5cdFx0dGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXG5cdFx0XHRcIm92ZXJsYXlfc2hvd1wiXG5cdFx0KTtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuXHRcdFx0XCJrZXlkb3duXCIsXG5cdFx0XHR0aGlzXG5cdFx0XHRcdC5faGFuZGxlRXNjS2V5XG5cdFx0KTtcblx0XHRtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFxuXHRcdFx0XCJjbGlja1wiLFxuXHRcdFx0dGhpc1xuXHRcdFx0XHQuX2hhbmRsZU91dHNpZGVDbGlja1xuXHRcdCk7XG5cdH1cblxuXHRzZXRFdmVudExpc3RlbmVycygpIHtcblx0XHRjb25zdCBwcm9maWxlQ2xvc2UgPVxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdFx0XCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXG5cdFx0XHQpO1xuXHRcdHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdFwiY2xpY2tcIixcblx0XHRcdChcblx0XHRcdFx0ZVxuXHRcdFx0KSA9PiB7XG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXG5cdFx0XHRcdFx0XHRcIm92ZXJsYXlfc2hvd1wiXG5cdFx0XHRcdFx0KSB8fFxuXHRcdFx0XHRcdGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcblx0XHRcdFx0XHRcdHByb2ZpbGVDbG9zZVxuXHRcdFx0XHRcdClcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxufVxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCIvKiogQGZvcm1hdCAqL1xuXG4vLyoqIEBmb3JtYXQgKi9cblxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG5cdGNvbnN0cnVjdG9yKHN1Ym1pdEZvcm0sIFBvcHVwU2VsZWN0b3IpIHtcblx0XHRzdXBlcihcblx0XHRcdFBvcHVwU2VsZWN0b3Jcblx0XHQpO1xuXHRcdHRoaXMuX3N1Ym1pdEZvcm0gPVxuXHRcdFx0c3VibWl0Rm9ybTtcblx0XHR0aGlzLl9wb3B1cEZvcm0gPVxuXHRcdFx0dGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHRcdFwiLmZvcm0tcHJvZmlsZVwiXG5cdFx0XHQpO1xuXHR9XG5cblx0X2dldElucHV0VmFsdWVzKCkge1xuXHRcdHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID1cblx0XHRcdG5hbWVJbnB1dC52YWx1ZTtcblx0XHRwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPVxuXHRcdFx0dGl0bGVJbnB1dC52YWx1ZTtcblx0XHQvL2lucHV0IHZhbHVlcyBmcm9tIGZvcm0gZmllbGRzXG5cdFx0Ly9cIm5hbWVcIjogbmV3SXRlbU5hbWUudmFsdWUsXG5cdFx0Ly9cImxpbmtcIjogbmV3SXRlbUxpbmsudmFsdWVcblx0fVxuXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xuXHRcdHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0dGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFxuXHRcdFx0XCJzdWJtaXRcIixcblx0XHRcdChcblx0XHRcdFx0ZVxuXHRcdFx0KSA9PiB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0dG9nZ2xlTW9kYWwoXG5cdFx0XHRcdFx0b3ZlcmxheVxuXHRcdFx0XHQpO1xuXHRcdFx0XHQvL2FkZCBjbGljayBldmVudCBsaXN0ZW5lcmNsb3NlIGljb25cblx0XHRcdFx0Ly9hZGQgc3VibWl0IHRvIHN1Ym1pdCBidXR0b25cblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0Y2xvc2UoKSB7XG5cdFx0dGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG5cdFx0c3VwZXIuY2xvc2UoKTtcblx0XHQvL3Jlc2V0XG5cdH1cbn1cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCIvKiogQGZvcm1hdCAqL1xuXG4vLyoqIEBmb3JtYXQgKi9cblxuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuXHRjb25zdHJ1Y3RvcihQb3B1cFNlbGVjdG9yKSB7XG5cdFx0c3VwZXIoUG9wdXBTZWxlY3Rvcik7XG5cdH1cblxuXHRvcGVuKHsgbGluaywgbmFtZSB9KSB7XG5cdFx0Ly9nZXQgbmFtZSBhbmQgbGluayBmcm9tIG1vZGVsIGZvcm1cblx0XHR0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKS50ZXh0Y29udGVudCA9IG5hbWU7XG5cdFx0Y29uc3QgaW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5cdFx0aW1hZ2Uuc3JjID0gbGluaztcblx0XHRpbWFnZS5hbHQgPSBgTWFnbmlmaWNlbnQgYXJ0aXN0IGludGVycHJldGF0aW9uIG9mICR7bmFtZX1gO1xuXHRcdC8vY2FsbCBvcGVuIGZ1bmN0aW9uIGZyb20gcGFyZW50IGNsYXNzIHdpdGggc3VwZXJcblx0XHRzdXBlci5vcGVuKCk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCIvKiogQGZvcm1hdCAqL1xuXG4vLyoqIEBmb3JtYXQgKi9cblxuY2xhc3MgU2VjdGlvbiB7XG5cdGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRDb250YWluZXIpIHtcblx0XHR0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG5cdFx0dGhpcy5pdGVtcyA9IGl0ZW1zO1xuXHRcdHRoaXMuY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZENvbnRhaW5lcik7XG5cdH1cblxuXHRyZW5kZXJTZWN0aW9uKCkge1xuXHRcdC8vcmVuZGVyIGVhY2ggZWxlbWVudCBvbiBwYWdlXG5cdFx0dGhpcy5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHR0aGlzLnJlbmRlcmVyKGl0ZW0pO1xuXHRcdH0pO1xuXHR9XG5cblx0YWRkSXRlbShjYXJkKSB7XG5cdFx0Ly90YWtlcyBET00gZWxlbWVudCBhbmQgYWRkcyBpdCB0byB0aGUgY29udGFpbmVyXG5cdFx0dGhpcy5jYXJkQ29udGFpbmVyLnByZXBlbmQoY2FyZCk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsIi8qKiBAZm9ybWF0ICovXG5cbi8vKiogQGZvcm1hdCAqL1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL3V0aWxzL0Zvcm1WYWxpZGF0b3JcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuLy9pbXBvcnQgXCIuLi9pbWFnZXMvYXZhdGFyLmpwZ1wiO1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL3V0aWxzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XG5cbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRCdXR0b25cIik7XG5jb25zdCBwaG90b01vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRQaG90b1wiKTtcbmNvbnN0IG1vZGFsUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfZWRpdF9wcm9maWxlXCIpO1xuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gbW9kYWxQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1wcm9maWxlXCIpO1xuXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fam9iXCIpO1xuXG5jb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5mb3Jtcy5wcm9maWxlLmVsZW1lbnRzLm5hbWU7XG5jb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZS5lbGVtZW50cy50aXRsZTtcblxuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV90eXBlX2VkaXRcIik7XG5cbi8vIGNvbnN0IHByb2ZpbGVDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcbmNvbnN0IGFkZFBob3RvQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b25fYWRkLXBob3RvXCIpO1xuY29uc3QgaW1nUHJldmlld0Nsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uX2ltYWdlXCIpO1xuXG5jb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XG5jb25zdCBjYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fYWRkXCIpO1xuXG5jb25zdCB0b2dnbGVNb2RhbCA9IChtb2RhbCkgPT4ge1xuXHRtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheV9zaG93XCIpO1xuXHRpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3ZlcmxheV9zaG93XCIpKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcblx0XHRtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT3V0c2lkZUNsaWNrKTtcblx0fSBlbHNlIHtcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NLZXkpO1xuXHRcdG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVPdXRzaWRlQ2xpY2spO1xuXHR9XG59O1xuXG5jb25zdCBoYW5kbGVPdXRzaWRlQ2xpY2sgPSAoZSkgPT4ge1xuXHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3ZlcmxheVwiKSkge1xuXHRcdHRvZ2dsZU1vZGFsKGUudGFyZ2V0KTtcblx0fVxufTtcbi8vY29uc3QgaGFuZGxlRXNjS2V5ID0gKGUpID0+IHtcbi8vIFx0Y29uc3QgYWN0aXZlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfc2hvd1wiKTtcbi8vIFx0aWYgKGUua2V5ID09PSBcIkVzY2FwZVwiICYmIGFjdGl2ZU1vZGFsKSB7XG4vLyBcdFx0dG9nZ2xlTW9kYWwoYWN0aXZlTW9kYWwpO1xuLy8gXHR9XG4vLyB9O1xuXG5jb25zdCBtb2RhbEVkaXRXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9lZGl0XCIpO1xuY29uc3QgbW9kYWxBZGRXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9hZGRcIik7XG5jb25zdCBtb2RhbFByZXZpZXdXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfdHlwZV9wcmV2aWV3XCIpO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuXHR0aXRsZUlucHV0LnZhbHVlID0gcHJvZmlsZVRpdGxlLnRleHRDb250ZW50O1xuXHR0b2dnbGVNb2RhbChtb2RhbEVkaXRXaW5kb3cpO1xufSk7XG5cbnBob3RvTW9kYWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0dG9nZ2xlTW9kYWwobW9kYWxBZGRXaW5kb3cpO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld1BpY3R1cmVcIikucmVzZXQoKTtcbn0pO1xuXG4vLyBwcm9maWxlQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vIFx0dG9nZ2xlTW9kYWwobW9kYWxFZGl0V2luZG93KTtcbi8vIH0pO1xuXG5pbWdQcmV2aWV3Q2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0dG9nZ2xlTW9kYWwobW9kYWxQcmV2aWV3V2luZG93KTtcbn0pO1xuXG5jb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1wcm9maWxlXCIpO1xuZm9ybVByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZUlucHV0LnZhbHVlO1xuXHRwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZUlucHV0LnZhbHVlO1xuXHR0b2dnbGVNb2RhbChvdmVybGF5KTtcbn0pO1xuXG5hZGRQaG90b0Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cdHRvZ2dsZU1vZGFsKG1vZGFsQWRkV2luZG93KTtcbn0pO1xuXG5jb25zdCBhZGRQaWN0dXJlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9hZGRcIik7XG5jb25zdCBwaWN0dXJlVGl0bGVJbnB1dCA9IGRvY3VtZW50LmZvcm1zLm5ld1BpY3R1cmUuZWxlbWVudHMubmFtZU9mUGxhY2U7XG5jb25zdCBwaWN0dXJlTGlua0lucHV0ID0gZG9jdW1lbnQuZm9ybXMubmV3UGljdHVyZS5lbGVtZW50cy5saW5rT2ZQbGFjZTtcbmNvbnN0IGNhcmRTZWxlY3RvciA9IFwiLmNhcmQtdGVtcGxhdGVcIjtcblxuYWRkUGljdHVyZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdGNvbnN0IHVzZXJDYXJkID0ge1xuXHRcdG5hbWU6IHBpY3R1cmVUaXRsZUlucHV0LnZhbHVlLFxuXHRcdGxpbms6IHBpY3R1cmVMaW5rSW5wdXQudmFsdWUsXG5cdH07XG5cblx0cmVuZGVyQ2FyZCh1c2VyQ2FyZCk7XG5cdHRvZ2dsZU1vZGFsKG1vZGFsQWRkV2luZG93KTtcbn0pO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG5cdHtcblx0XHRuYW1lOiBcIlNpbGljb24gVmFsbGV5XCIsXG5cdFx0bGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYyMTY0NjkxMjMyMS1jOTdhMjMzNzAxZDI/aXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTcxNiZxPTgwXCIsXG5cdH0sXG5cdHtcblx0XHRuYW1lOiBcIk1pYW1pIEJlYWNoXCIsXG5cdFx0bGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYyMjk0MjgxNzQ1NC1lZDYxNmU4ZDNhMmQ/aXhpZD1Nbnd4TWpBM2ZEQjhNSHgyYVhOMVlXd3RjMlZoY21Ob2ZERjhmSHhsYm53d2ZIeDhmQSUzRCUzRCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTgwMCZxPTYwXCIsXG5cdH0sXG5cdHtcblx0XHRuYW1lOiBcIkxhbmQgb2YgRmlyZSAmIEljZVwiLFxuXHRcdGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MjAwNTM1NTMxNTYtOTJlMTVkNTRmN2VlP2l4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4T1h4OGVXVnNiRzkzSlRJd1pteGhiV1VsTWpCaWJIVmxKVEl3YzIxdmEyVjhaVzU4TUh4OE1IeDgmaXhsaWI9cmItMS4yLjEmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz04MDAmcT02MFwiLFxuXHR9LFxuXHR7XG5cdFx0bmFtZTogXCJOZW9uIFJhaW5cIixcblx0XHRsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjIxODcwNjE2MzE5LWVlYjdmZGYzMTIzND9peGlkPU1ud3hNakEzZkRCOE1IeDJhWE4xWVd3dGMyVmhjbU5vZkRGOGZIeGxibnd3Zkh4OGZBJTNEJTNEJml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODAwJnE9NjBcIixcblx0fSxcblx0e1xuXHRcdG5hbWU6IFwiRmFzaGlvbiBDYXBpdGFsXCIsXG5cdFx0bGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYxODI0NTYxMzkwMS1lNTJiN2UwMTIzYzc/aXhpZD1Nbnd4TWpBM2ZEQjhNSHh3Y205bWFXeGxMWEJoWjJWOE1UbDhmSHhsYm53d2ZIeDhmQSUzRCUzRCZpeGxpYj1yYi0xLjIuMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTgwMCZxPTYwXCIsXG5cdH0sXG5cdHtcblx0XHRuYW1lOiBcIkNhcGUgQ2FuYXZlcmFsXCIsXG5cdFx0bGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUzMDQ0NzkyMDE4NC1iODhjODg3Mj9peGlkPU1ud3hNakEzZkRCOE1IeDJhWE4xWVd3dGMyVmhjbU5vZkRGOGZIeGxibnd3Zkh4OGZBJTNEJTNEJml4bGliPXJiLTEuMi4xJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9ODAwJnE9NjBcIixcblx0fSxcbl07XG5cbmNvbnN0IHBob3RvR3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tZ3JpZFwiKTtcblxuLy8gY29uc3QgdXNlckluZm8gPSBuZXcgdXNlckluZm8oe1xuLy8gXHR1c2VybmFtZVNlbGVjdG9yOiBwcm9maWxlQ29uZmlnLnByb2ZpbGVUaXRsZSxcbi8vIFx0dXNlckRlc2NyaXB0aW9uU2VsZWN0b3I6IHByb2ZpbGVDb25maWcucHJvZmlsZURlc2NyaXB0aW9uXG4vLyB9KVxuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xuXHRyZW5kZXJlcjogKGRhdGEpID0+IHtcblx0XHRjb25zb2xlLmxvZyhcInJlbmRlcmVyXCIsIGRhdGEpO1xuXHRcdGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcblx0XHRcdHtcblx0XHRcdFx0ZGF0YSxcblx0XHRcdFx0aGFuZGxlQ2FyZENsaWNrOiAoZGF0YSkgPT4ge1xuXHRcdFx0XHRcdGltYWdlUG9wdXAub3Blbih7XG5cdFx0XHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdFx0XHRsaW5rOiBkYXRhLmxpbmssXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0Y2FyZFNlbGVjdG9yXG5cdFx0KTtcblx0XHRwaG90b0dyaWQucHJlcGVuZChjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcblx0XHQoXCIuY2FyZC10ZW1wbGF0ZVwiKTtcblx0fSxcbn0pO1xuLy9zZWN0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vL2NvbnNvbGUubG9nKHNlY3Rpb24pO1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcblx0Y29uc3QgY2FyZCA9IG5ldyBDYXJkKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrIH0sIGNhcmRTZWxlY3Rvcik7XG5cdHBob3RvR3JpZC5wcmVwZW5kKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xufTtcblxuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcblx0cmVuZGVyQ2FyZChjYXJkKTtcbn0pO1xuXG5jb25zdCBwb3B1cCA9IG5ldyBQb3B1cChQb3B1cFNlbGVjdG9yKTtcbnBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHN1Ym1pdEZvcm0sIFBvcHVwU2VsZWN0b3IpO1xucG9wdXBGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoUG9wdXBTZWxlY3Rvcik7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKG5hbWVTZWxlY3RvciwgdGl0bGVTZWxlY3Rvcik7XG5cbmNvbnN0IGNvbmZpZyA9IHtcblx0aW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0tY29udHJvbC1pbnB1dFwiLFxuXHRzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuYnV0dG9uXCIsXG5cdGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX2Rpc2FibGVkXCIsXG5cdGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZm9ybS1jb250cm9sLWlucHV0LWVycm9yXCIsXG5cdGVycm9yQ2xhc3M6IFwicG9wdXAtZXJyb3JcIixcbn07XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBlZGl0Rm9ybUVsZW1lbnQpO1xuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRGb3JtRWxlbWVudCk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJjb25zb2xlIiwibG9nIiwiaW5wdXQiLCJlcnJvciIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJidXR0b24iLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvck1lc3NhZ2UiLCJfc2hvd0Vycm9yTWVzc2FnZSIsImlucHV0cyIsIl9pbnB1dHMiLCJldmVyeSIsIl9idXR0b24iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJlIiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJkb2N1bWVudCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2hlYXJ0IiwidG9nZ2xlIiwiX3RleHQiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZExpa2UiLCJfY2FyZCIsImNhcmREZWxldGUiLCJjYXJkSW1hZ2UiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlSWNvbiIsIl9uYW1lIiwic3JjIiwiYWx0IiwiX2dldFRlbXBsYXRlIiwiX3ByZXBhcmVDYXJkIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwia2V5IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50IiwiY29udGFpbnMiLCJfaGFuZGxlRXNjS2V5IiwiX2hhbmRsZU91dHNpZGVDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtb2RhbCIsInByb2ZpbGVDbG9zZSIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtIiwiUG9wdXBTZWxlY3RvciIsIl9zdWJtaXRGb3JtIiwiX3BvcHVwRm9ybSIsInByb2ZpbGVOYW1lIiwibmFtZUlucHV0IiwidmFsdWUiLCJwcm9maWxlVGl0bGUiLCJ0aXRsZUlucHV0IiwiX3BvcHVwU2VsZWN0b3IiLCJ0b2dnbGVNb2RhbCIsIm92ZXJsYXkiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwidGV4dGNvbnRlbnQiLCJpbWFnZSIsIlNlY3Rpb24iLCJjYXJkQ29udGFpbmVyIiwiaXRlbXMiLCJyZW5kZXJlciIsIml0ZW0iLCJjYXJkIiwicHJlcGVuZCIsImVkaXRCdXR0b24iLCJwaG90b01vZGFsQnV0dG9uIiwiZWRpdEZvcm1FbGVtZW50IiwiZm9ybXMiLCJwcm9maWxlIiwiZWxlbWVudHMiLCJ0aXRsZSIsImFkZFBob3RvQ2xvc2UiLCJpbWdQcmV2aWV3Q2xvc2UiLCJjYXJkRm9ybUVsZW1lbnQiLCJoYW5kbGVFc2NLZXkiLCJoYW5kbGVPdXRzaWRlQ2xpY2siLCJtb2RhbEVkaXRXaW5kb3ciLCJtb2RhbEFkZFdpbmRvdyIsIm1vZGFsUHJldmlld1dpbmRvdyIsImdldEVsZW1lbnRCeUlkIiwiYWRkUGljdHVyZUZvcm0iLCJwaWN0dXJlVGl0bGVJbnB1dCIsIm5ld1BpY3R1cmUiLCJuYW1lT2ZQbGFjZSIsInBpY3R1cmVMaW5rSW5wdXQiLCJsaW5rT2ZQbGFjZSIsInVzZXJDYXJkIiwicmVuZGVyQ2FyZCIsInBob3RvR3JpZCIsImltYWdlUG9wdXAiLCJvcGVuIiwiZ2VuZXJhdGVDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImNhcmRGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=